<div x-data="{ tab: 'design', width: '100%', height: '0px' }" class="pb-20">
  <nav class="tab">
    <div class="container mx-auto flex w-100 px-1">
      <button class="tab-link active" :class="{ 'active': tab === 'design' }" @click="tab = 'design'">Design</button>
      <button class="tab-link" :class="{ 'active': tab === 'code' }" @click="tab = 'code'; $refs.code.style.height = height;">Code</button>
      <button
        class="tab-link"
        x-ref="copyCodeButton"
        @click="$refs.copyCode.select(); document.execCommand('copy'); $refs.copyCodeButton.innerText = 'Copied!'; setTimeout(function() {$refs.copyCodeButton.innerText = 'Copy Code'}, 1000);"
      >
        Copy Code
      </button>

      <label class="tag-label" x-show="tab === 'design'">
        <span class="sr-only">Get in my range</span>
        <input 
          @input="width = event.target.value + '%';height = '0px';let scrollHeight = $refs.resizableFrame.contentWindow.document.body.scrollHeight;height = scrollHeight + 'px'; " 
          type="range" 
          class="tag-range" 
          value="100" 
          step="0.01"
        />
      </label>
    </div>
  </nav>

  <!-- To display the component -->
  <div x-show="tab === 'design'">
    <div class="mb-2 overflow-visible bg-white border-b-2 border-gray-200">
      <iframe
        style="min-height: 300px;min-width: 320px;"
        x-ref="resizableFrame"
        x-on:load="height = $refs.resizableFrame.contentWindow.document.body.scrollHeight + 'px';"
        x-bind:width="width"
        x-bind:height="height"
        loading="lazy"
        srcdoc="<!DOCTYPE html>
        <meta charset='utf-8' />
        <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no' />
        <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1' />
        <link rel='stylesheet' href='/build.css' />
        <script src='/kutty.js'></script>
        {{ .Inner | safeHTMLAttr }}"
      >
      </iframe>
    </div>
  </div>

  <!-- To display the code -->
  <div class="bg-gray-200 mb-2 outline-none relative overflow-y-auto"
    x-ref="code"
    x-show="tab === 'code'"
    x-cloak
  >
    {{ if len .Params | eq 2 }} {{ highlight (trim .Inner "\n\r") (.Get 0) (.Get 1) }} {{ else }} {{ highlight (trim .Inner "\n\r") (.Get 0) "" }} {{ end }}
  </div>

  <textarea class="sr-only whitespace-pre-wrap" x-ref="copyCode" aria-hidden="true" readonly="true">{{ .Inner | safeHTMLAttr }}</textarea>
</div>

